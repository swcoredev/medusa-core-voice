"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GET = void 0;
const utils_1 = require("@medusajs/framework/utils");
const helpers_1 = require("./helpers");
const entity_mappings_1 = require("./entity-mappings");
/**
 * @ignore
 *
 * @privateRemarks
 * Remove the `ignore` tag once the feature is ready. Otherwise,
 * it will be generated in the documentation.
 */
const GET = async (req, res) => {
    const entity = req.params.entity;
    const entityMapping = entity_mappings_1.ENTITY_MAPPINGS[entity];
    if (!entityMapping) {
        return res.status(400).json({
            message: `Unsupported entity: ${entity}`,
            type: "invalid_data",
        });
    }
    try {
        const columns = (0, helpers_1.generateEntityColumns)(entity, entityMapping);
        if (columns) {
            return res.json({
                columns,
            });
        }
    }
    catch (schemaError) {
        throw new utils_1.MedusaError(utils_1.MedusaError.Types.UNEXPECTED_STATE, `Schema introspection failed for entity: ${entity}. Please check if the entity exists in the schema.`);
    }
    return res.sendStatus(500);
};
exports.GET = GET;
//# sourceMappingURL=route.js.map